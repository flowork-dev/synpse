# Flowork Core

Welcome to Flowork Core, the heart of the FLOWORK Synapse automation platform. This is the central backend service responsible for all business logic, workflow execution, component management, and data persistence.

## 🚀 About Flowork Core

Flowork Core is designed to be a powerful, standalone server that can be run independently of any specific user interface. It exposes a secure API that the `flowork-gateway` uses to communicate with various GUIs. Its primary goal is to orchestrate complex tasks based on visually designed workflows.

## ✨ Key Features

* **Kernel & Service Architecture:** A modular core built around a central Kernel that manages all system services (e.g., `ModuleManager`, `WorkflowExecutor`, `ApiServerService`).
* **Visual Workflow Execution:** The `WorkflowExecutorService` interprets and runs the JSON-based `.flowork` files created by the visual editor.
* **Component Management:** Discovers and manages various types of addons like Modules, Plugins, Widgets, and Triggers.
* **Secure API Server:** Exposes a comprehensive REST API for the Gateway to interact with, enabling full control over the application's state and execution.
* **Service Compiler:** Features a unique system (`run_compiler.py`) to compile `.flowork` files into runnable Python service classes, allowing for "visual service design".
* **License & Tier Management:** Built-in system to manage feature access based on user license tiers.

## 📁 Directory Structure

A brief overview of the key directories within `flowork-core`:

/flowork-core
│
├── ai_providers/       # Contains different AI provider integrations (Gemini, ChatGPT).
├── core_services/      # Source .flowork files for core services.
├── flowork_kernel/     # The heart of the application, containing the Kernel and all services.
├── formatters/         # Data formatters (e.g., CSV, JSON).
├── generated_services/ # Python services automatically generated by the Core Compiler.
├── locales/            # Language files for internationalization.
├── modules/            # Reusable logic/action nodes for workflows.
├── plugins/            # System-wide plugins that can provide UI elements or background tasks.
├── scanners/           # System diagnostic and integrity scanners.
├── triggers/           # Modules for triggering workflows based on events (files, time, etc.).
├── widgets/            # Backend logic for dashboard widgets.
│
├── server.py           # Main entry point to start the Core server.
├── run_compiler.py     # Script to compile .flowork services.
└── ..

## ⚙️ Setup & Installation

Flowork Core uses [Poetry](https://python-poetry.org/) for dependency management.

1.  **Prerequisites:** Ensure you have Python 3.10+ and Poetry installed.
2.  **Install Dependencies:** From the root of the `flowork-core` directory, run:
    ```bash
    poetry install
    ```
3.  **Configuration:**
    * Copy the `.env.example` file to a new file named `.env`.
    * Fill in the required values in the `.env` file, such as API keys. **This file should never be committed to version control.**

## ▶️ How to Run

There are two primary ways to run processes in Flowork Core:

1.  **Start the Main Server:** This launches the Kernel, all services, and the API server.
    ```bash
    poetry run python server.py
    ```

2.  **Run the Core Service Compiler:** This is needed if you modify any `.flowork` files in the `core_services` directory.
    ```bash
    poetry run python run_compiler.py
    ```

## 🔌 API

The Core server exposes a REST API (by default on port `8989`). However, in the standard 3-tier architecture, all requests should go through the `flowork-gateway` (port `80`), not directly to this server.


